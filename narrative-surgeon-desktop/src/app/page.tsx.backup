'use client'

import { useEffect } from 'react'
import { useAppStore } from '../lib/store'
// REMOVED: import { ManuscriptsList } from '../components/ManuscriptsList' // Multi-manuscript feature removed
// REMOVED: import { CreateManuscriptDialog } from '../components/CreateManuscriptDialog' // Multi-manuscript feature removed

export default function Dashboard() {
  const { 
    loading, 
    error, 
    loadManuscripts, 
    setCurrentView,
    setError 
  } = useAppStore()

  useEffect(() => {
    setCurrentView('dashboard')
    loadManuscripts()
  }, [setCurrentView, loadManuscripts])

  if (loading) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="text-lg">Loading manuscripts...</div>
      </div>
    )
  }

  if (error) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="text-center">
          <div className="text-lg text-destructive mb-4">Error: {error}</div>
          <button 
            onClick={() => {
              setError(null)
              loadManuscripts()
            }}
            className="px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90"
          >
            Try Again
          </button>
        </div>
      </div>
    )
  }

  return (
    <div className="container mx-auto px-6 py-8">
      <div className="mb-8">
        <h1 className="text-3xl font-bold mb-2">Narrative Surgeon</h1>
        <p className="text-muted-foreground">
          Professional manuscript editing and analysis
        </p>
      </div>

    {/* Removed ManuscriptsList - multi-manuscript feature no longer needed */}
        onManuscriptSelect={(manuscript) => {
          // Navigate to manuscript editor
          window.location.href = `/manuscripts/${manuscript.id}/editor`
        }}
        onCreateNew={() => {
          // This will be handled by the CreateManuscriptDialog component
        }}
      />

    {/* Removed CreateManuscriptDialog - multi-manuscript feature no longer needed */}
        onClose={() => {}}
        onManuscriptCreated={(manuscript) => {
          // Navigate to the new manuscript
          window.location.href = `/manuscripts/${manuscript.id}/editor`
        }}
      />
    </div>
  )
}